<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>114306012_Number Guessing Game</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:20px}
    #resultImg img{max-width:300px}
  </style>
</head>
<body>
  <h1>114306012_Number Guessing Game</h1>
  <p>Open the page and the game will start via <code>prompt()</code>. Range: 1~100, attempts: 7.</p>

  <div id="resultImg"></div>

  <script>
    (function(){
      // configuration
      var min = 1, max = 100;
      var answer = Math.floor(Math.random() * 100) + 1;
      var chances = 7;
      var lower = min, upper = max;
      var resultDiv = document.getElementById('resultImg');

      // helper to insert image into the empty div
      function insertImage(filename){
        resultDiv.innerHTML = '';
        var img = document.createElement('img');
        img.src = 'images/' + filename; // put images in images/ folder
        img.alt = filename;
        resultDiv.appendChild(img);
      }

      while (chances > 0) {
        var promptText = '請輸入 ' + lower + ' 到 ' + upper + ' 之間的整數。\n你還有 ' + chances + ' 次機會。';
        var input = window.prompt(promptText);

        if (input === null) { // user pressed cancel
          alert('遊戲已中止。答案為: ' + answer);
          break;
        }

        input = input.trim();
        if (input === '' || isNaN(input)) {
          alert('輸入無效：請輸入數字。');
          continue; // do not consume attempt
        }

        var guess = Number(input);
        if (!Number.isInteger(guess) || guess < lower || guess > upper) {
          alert('輸入範圍錯誤：請輸入 ' + lower + ' 到 ' + upper + ' 的整數。');
          continue; // do not consume attempt
        }

        // consume an attempt
        chances--;

        if (guess === answer) {
          alert('恭喜你答對了！答案就是 ' + answer + '\n你還剩 ' + chances + ' 次機會');
          insertImage('correct.jpg');
          break; // end game
        } else if (guess < answer) {
          alert('太小了！');
          // narrow the lower bound if guess+1 is higher
          if (guess + 1 > lower) lower = Math.max(lower, guess + 1);
        } else {
          alert('太大了！');
          if (guess - 1 < upper) upper = Math.min(upper, guess - 1);
        }

        if (chances === 0) {
          alert('次數已用完。正確答案是：' + answer);
          insertImage('wrong.jpg');
          break;
        }
      }
    })();
  </script>
</body>
</html>